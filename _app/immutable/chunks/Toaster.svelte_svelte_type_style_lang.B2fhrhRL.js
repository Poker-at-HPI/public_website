import{b as P,t as _}from"./index.Aozpq-_l.js";import{x as A,y as C}from"./scheduler.CAj9Y8_W.js";import{w as D}from"./entry.CgOmwr3V.js";function G(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function J(s,c){P(s,1,1,()=>{c.delete(s.key)})}function K(s,c,T,u,w,S,b,H,E,M,v,$){let l=s.length,h=S.length,d=l;const x={};for(;d--;)x[s[d].key]=d;const n=[],e=new Map,t=new Map,m=[];for(d=h;d--;){const i=$(w,S,d),f=T(i);let r=b.get(f);r?m.push(()=>r.p(i,c)):(r=M(f,i),r.c()),e.set(f,n[d]=r),f in x&&t.set(f,Math.abs(d-x[f]))}const p=new Set,o=new Set;function g(i){_(i,1),i.m(H,v),b.set(i.key,i),v=i.first,h--}for(;l&&h;){const i=n[h-1],f=s[l-1],r=i.key,a=f.key;i===f?(v=i.first,l--,h--):e.has(a)?!b.has(r)||p.has(r)?g(i):o.has(a)?l--:t.get(r)>t.get(a)?(o.add(r),g(i)):(p.add(a),l--):(E(f,b),l--)}for(;l--;){const i=s[l];e.has(i.key)||E(i,b)}for(;h;)g(n[h-1]);return A(m),n}function L(...s){return s.filter(Boolean).join(" ")}const j=typeof document<"u";function k(s){const c=D(s);function T(w){j&&c.set(w)}function u(w){j&&c.update(w)}return{subscribe:c.subscribe,set:T,update:u}}let B=0;function F(){const s=k([]),c=k([]);function T(n){s.update(e=>[n,...e])}function u(n){var f;const{message:e,...t}=n,m=typeof(n==null?void 0:n.id)=="number"||n.id&&((f=n.id)==null?void 0:f.length)>0?n.id:B++,p=n.dismissable===void 0?!0:n.dismissable,o=n.type===void 0?"default":n.type;return C(s).find(r=>r.id===m)?s.update(r=>r.map(a=>a.id===m?{...a,...n,id:m,title:e,dismissable:p,type:o,updated:!0}:{...a,updated:!1})):T({...t,id:m,title:e,dismissable:p,type:o}),m}function w(n){if(n===void 0){s.set([]);return}return s.update(e=>e.filter(t=>t.id!==n)),n}function S(n,e){return u({...e,type:"default",message:n})}function b(n,e){return u({...e,type:"error",message:n})}function H(n,e){return u({...e,type:"success",message:n})}function E(n,e){return u({...e,type:"info",message:n})}function M(n,e){return u({...e,type:"warning",message:n})}function v(n,e){return u({...e,type:"loading",message:n})}function $(n,e){if(!e)return;let t;e.loading!==void 0&&(t=u({...e,promise:n,type:"loading",message:e.loading}));const m=n instanceof Promise?n:n();let p=t!==void 0;return m.then(o=>{if(o&&typeof o.ok=="boolean"&&!o.ok){p=!1;const g=typeof e.error=="function"?e.error(`HTTP error! status: ${o.status}`):e.error;u({id:t,type:"error",message:g})}else if(e.success!==void 0){p=!1;const g=typeof e.success=="function"?e.success(o):e.success;u({id:t,type:"success",message:g})}}).catch(o=>{if(e.error!==void 0){p=!1;const g=typeof e.error=="function"?e.error(o):e.error;u({id:t,type:"error",message:g})}}).finally(()=>{var o;p&&(w(t),t=void 0),(o=e.finally)==null||o.call(e)}),t}function l(n,e){const t=(e==null?void 0:e.id)||B++;return u({component:n,id:t,...e}),t}function h(n){c.update(e=>e.filter(t=>t.toastId!==n))}function d(n){c.update(e=>[n,...e])}function x(){s.set([]),c.set([])}return{create:u,addToast:T,dismiss:w,message:S,error:b,success:H,info:E,warning:M,loading:v,promise:$,custom:l,removeHeight:h,addHeight:d,reset:x,toasts:s,heights:c}}const y=F();function I(s,c){return y.create({message:s,...c})}const O=I;Object.assign(O,{success:y.success,info:y.info,warning:y.warning,error:y.error,custom:y.custom,message:y.message,promise:y.promise,dismiss:y.dismiss,loading:y.loading});const N=s=>({subscribe:s});export{K as a,L as c,G as e,J as o,y as t,N as u};
